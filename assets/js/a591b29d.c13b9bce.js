"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[1005],{3905:(e,o,a)=>{a.d(o,{Zo:()=>m,kt:()=>u});var r=a(7294);function t(e,o,a){return o in e?Object.defineProperty(e,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[o]=a,e}function n(e,o){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);o&&(r=r.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),a.push.apply(a,r)}return a}function s(e){for(var o=1;o<arguments.length;o++){var a=null!=arguments[o]?arguments[o]:{};o%2?n(Object(a),!0).forEach((function(o){t(e,o,a[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(a,o))}))}return e}function i(e,o){if(null==e)return{};var a,r,t=function(e,o){if(null==e)return{};var a,r,t={},n=Object.keys(e);for(r=0;r<n.length;r++)a=n[r],o.indexOf(a)>=0||(t[a]=e[a]);return t}(e,o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)a=n[r],o.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(t[a]=e[a])}return t}var d=r.createContext({}),c=function(e){var o=r.useContext(d),a=o;return e&&(a="function"==typeof e?e(o):s(s({},o),e)),a},m=function(e){var o=c(e.components);return r.createElement(d.Provider,{value:o},e.children)},p={inlineCode:"code",wrapper:function(e){var o=e.children;return r.createElement(r.Fragment,{},o)}},l=r.forwardRef((function(e,o){var a=e.components,t=e.mdxType,n=e.originalType,d=e.parentName,m=i(e,["components","mdxType","originalType","parentName"]),l=c(a),u=t,f=l["".concat(d,".").concat(u)]||l[u]||p[u]||n;return a?r.createElement(f,s(s({ref:o},m),{},{components:a})):r.createElement(f,s({ref:o},m))}));function u(e,o){var a=arguments,t=o&&o.mdxType;if("string"==typeof e||t){var n=a.length,s=new Array(n);s[0]=l;var i={};for(var d in o)hasOwnProperty.call(o,d)&&(i[d]=o[d]);i.originalType=e,i.mdxType="string"==typeof e?e:t,s[1]=i;for(var c=2;c<n;c++)s[c]=a[c];return r.createElement.apply(null,s)}return r.createElement.apply(null,a)}l.displayName="MDXCreateElement"},3232:(e,o,a)=>{a.r(o),a.d(o,{assets:()=>d,contentTitle:()=>s,default:()=>p,frontMatter:()=>n,metadata:()=>i,toc:()=>c});var r=a(7462),t=(a(7294),a(3905));const n={slug:"api-design-first",title:"Desenhe primeiro sua interface de API, antes de come\xe7ar a desenvolver",description:"Projetar interfaces de API na maioria das vezes \xe9 a melhor forma para validar o contrato e funcionamento da API.\nEsse \xe9 o princ\xedpio do Design First de API.\n",authors:"rafaelbmateus",tags:["rafaelbmateus","blog"]},s=void 0,i={permalink:"/api-design-first",source:"@site/blog/2022-09-05-api-design-first/index.md",title:"Desenhe primeiro sua interface de API, antes de come\xe7ar a desenvolver",description:"Projetar interfaces de API na maioria das vezes \xe9 a melhor forma para validar o contrato e funcionamento da API.\nEsse \xe9 o princ\xedpio do Design First de API.\n",date:"2022-09-05T00:00:00.000Z",formattedDate:"5 de setembro de 2022",tags:[{label:"rafaelbmateus",permalink:"/tags/rafaelbmateus"},{label:"blog",permalink:"/tags/blog"}],readingTime:3.655,hasTruncateMarker:!0,authors:[{name:"Rafael Mateus",title:"Software Developer",email:"rafaelbmateus.dev@gmail.com",url:"https://github.com/rafaelbmateus",imageURL:"https://github.com/rafaelbmateus.png",key:"rafaelbmateus"}],frontMatter:{slug:"api-design-first",title:"Desenhe primeiro sua interface de API, antes de come\xe7ar a desenvolver",description:"Projetar interfaces de API na maioria das vezes \xe9 a melhor forma para validar o contrato e funcionamento da API.\nEsse \xe9 o princ\xedpio do Design First de API.\n",authors:"rafaelbmateus",tags:["rafaelbmateus","blog"]},prevItem:{title:"Desvendando o Ecossistema de APIs: Edge Proxy, Service Proxy, API Gateway e Service Mesh",permalink:"/edge-proxy-service-proxy-api-gateway-service-mesh"}},d={authorsImageUrls:[void 0]},c=[],m={toc:c};function p(e){let{components:o,...a}=e;return(0,t.kt)("wrapper",(0,r.Z)({},m,a,{components:o,mdxType:"MDXLayout"}),(0,t.kt)("p",null,"Projetar interfaces de API na grande maioria das vezes \xe9 a melhor forma para validar o contrato e funcionamento da API, antes de come\xe7ar a programar.\nEsse \xe9 o princ\xedpio do Design First de API. Antes de desenvolver c\xf3digos para o backend, criar a especifica\xe7\xe3o do contrato de API."),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"\xc9 muito mais f\xe1cil ajustar a documenta\xe7\xe3o do que um c\xf3digo!")),(0,t.kt)("h1",{id:"identifique-os-resources"},"Identifique os resources"),(0,t.kt)("p",null,"O conceito fundamental em qualquer API RESTful \xe9 o recurso.\nUm recurso \xe9 um objeto com um tipo, dados associados, relacionamentos com outros recursos e um conjunto de m\xe9todos que operam nele.\n\xc9 semelhante a uma inst\xe2ncia de objeto em uma linguagem de programa\xe7\xe3o orientada a objetos, com a importante diferen\xe7a de que apenas\nalguns m\xe9todos padr\xe3o s\xe3o definidos para o recurso (correspondendo aos m\xe9todos padr\xe3o HTTP GET, POST, PUT, DELETE, \u2026),\nenquanto uma inst\xe2ncia de objeto geralmente tem outros m\xe9todos."),(0,t.kt)("p",null,"Os resources podem ser agrupados em collections. Cada collection \xe9 homog\xeanea para que contenha apenas um tipo de resource.\nOs resources tamb\xe9m podem existir fora de qualquer collection. Nesse caso, nos referimos a esses recursos como singleton resource.\nAs collections tamb\xe9m s\xe3o resources."),(0,t.kt)("p",null,"As cole\xe7\xf5es podem existir globalmente, no n\xedvel superior de uma API, mas tamb\xe9m podem estar contidas em um \xfanico recurso.\nNeste caso, nos referimos a essas collections como subcole\xe7\xf5es. As subcollections geralmente s\xe3o usadas para expressar algum\ntipo de relacionamento \u201ccontido em\u201d."),(0,t.kt)("p",null,"O diagrama abaixo ilustra os principais conceitos em uma API RESTful."),(0,t.kt)("imagem",null),(0,t.kt)("h1",{id:"design-first"},"Design First"),(0,t.kt)("p",null,"Em Design-first, a descri\xe7\xe3o da API \xe9 escrita primeiro e, em seguida, o c\xf3digo. As primeiras vantagens \xf3bvias s\xe3o que o c\xf3digo\nj\xe1 tem um esqueleto e que algumas ferramentas podem fornecer c\xf3digo clientes automaticamente."),(0,t.kt)("p",null,"Que pra mim faz todo o sentido, ir validando a API em etapas e construindo junto a solu\xe7\xe3o junto com o cliente ou personas externas.\nIsso faz com que se crie o contrato, documenta\xe7\xe3o, mock, valida\xe7\xe3o antes de come\xe7ar a escrever o c\xf3digo da API."),(0,t.kt)("p",null,"Aqui na ",(0,t.kt)("a",{parentName:"p",href:"https://neoway.com.br"},"Neoway"),", utilizamos o OpenAPI Specification para descrever o comportamento da API.\nEssa especifica\xe7\xe3o \xe9 um padr\xe3o disseminado no mercado, usado por muitos servi\xe7os e softwares, podendo facilmente ser\nimportado e ter a documenta\xe7\xe3o suficiente para conhecer o contrato de API e iniciar a integra\xe7\xe3o."),(0,t.kt)("h1",{id:"openapi-specification"},"OpenAPI Specification"),(0,t.kt)("p",null,"A OpenAPI Specification (OAS) define uma interface padr\xe3o independente de linguagem para APIs HTTP que permite que humanos\ne computadores descubram e compreendam os recursos do servi\xe7o sem acesso ao c\xf3digo-fonte, documenta\xe7\xe3o ou por meio de inspe\xe7\xe3ode tr\xe1fego de rede.\nQuando definido corretamente, um consumidor pode entender e interagir com o servi\xe7o remoto com uma quantidade m\xednima de l\xf3gica de implementa\xe7\xe3o.\nUma defini\xe7\xe3o OpenAPI pode ser usada por ferramentas de gera\xe7\xe3o de documenta\xe7\xe3o para exibir a API, ferramentas de gera\xe7\xe3o de c\xf3digo para gerar\nservidores e clientes em v\xe1rias linguagens de programa\xe7\xe3o, ferramentas de teste e muitos outros casos de uso."),(0,t.kt)("h1",{id:"endpoints-e-verbos"},"Endpoints e Verbos"),(0,t.kt)("p",null,'Os endpoints e os verbos s\xe3o os endere\xe7os para acessar alguma funcionalidade da API, s\xe3o as formas de solicitar alguma coisa,\nalgo como: "Me d\xe1 os dados da minha conta ai\u201d, resultaria em um GET em ',(0,t.kt)("inlineCode",{parentName:"p"},"/accounts/me"),".\nO conjunto de endpoints, formam o produto de API, como nesse exemplo, um micro servi\xe7o de pedidos de compras:"),(0,t.kt)("h1",{id:"schemas"},"Schemas"),(0,t.kt)("p",null,"Os schemas representam os objetos de dom\xednio. O objeto Schema permite a defini\xe7\xe3o de tipos de dados de entrada e sa\xedda.\nEsses tipos podem ser objetos, mas tamb\xe9m primitivos e arrays."),(0,t.kt)("h1",{id:"especifica\xe7\xe3o-perto-do-c\xf3digo"},"Especifica\xe7\xe3o perto do c\xf3digo"),(0,t.kt)("p",null,"As especifica\xe7\xf5es do OpenAPI ficam em arquivos yaml ou json, podendo ser lidos com facilidade por uma pessoa com perfil t\xe9cnico."),(0,t.kt)("p",null,"O legal de ter a documenta\xe7\xe3o via c\xf3digo, \xe9 que podemos fazer commit desses arquivos em um reposit\xf3rio e ter controle de vers\xe3o sobre eles.\nEa\xed fechou! Colocamos as pipelines de CI/CD para rodar\ud83e\udd18 "),(0,t.kt)("p",null,"As descri\xe7\xf5es da OpenAPI n\xe3o s\xe3o apenas um artefato de documenta\xe7\xe3o: s\xe3o arquivos de origem de primeira classe que podem conduzir um grande\nn\xfamero de processos automatizados, incluindo gera\xe7\xe3o de boilerplate, teste de unidade e renderiza\xe7\xe3o da documenta\xe7\xe3o."),(0,t.kt)("p",null,"Como tal, a descri\xe7\xe3o do OpenAPI deve ser mantida no seu reposit\xf3rio, de fato, deve estar entre os primeiros arquivos a serem confirmados.\nA partir da\xed, eles tamb\xe9m devem participar dos processos de Integra\xe7\xe3o Cont\xednua."),(0,t.kt)("p",null,"Se quiser saber mais sobre configurar a pipeline leia esse artigo: Como validar seu Guideline de API na pipeline do CI"),(0,t.kt)("h1",{id:"refer\xeancias"},"Refer\xeancias"),(0,t.kt)("p",null,(0,t.kt)("a",{parentName:"p",href:"https://oai.github.io/Documentation/best-practices.html"},"https://oai.github.io/Documentation/best-practices.html"),"\n",(0,t.kt)("a",{parentName:"p",href:"https://developers.redhat.com/blog/2019/02/25/full-api-lifecycle-management-a-primer"},"https://developers.redhat.com/blog/2019/02/25/full-api-lifecycle-management-a-primer"),"\n",(0,t.kt)("a",{parentName:"p",href:"https://rapidapi.com/blog/api-lifecycle-management"},"https://rapidapi.com/blog/api-lifecycle-management"),"\n",(0,t.kt)("a",{parentName:"p",href:"https://restful-api-design.readthedocs.io/en/latest/resources.html"},"https://restful-api-design.readthedocs.io/en/latest/resources.html")))}p.isMDXComponent=!0}}]);